--
-- VHDL ARCHITECTURE ECE411.SHIFT16.UNTITLED
--
-- CREATED:
--          BY - HERSTAD.STDT (EESN24.EWS.UIUC.EDU)
--          AT - 14:23:38 04/01/03
--
-- GENERATED BY MENTOR GRAPHICS' HDL DESIGNER(TM) 2001.5 (BUILD 170)
--
-- HDS INTERFACE_START
LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.NUMERIC_STD.ALL;
LIBRARY ECE411;
USE ECE411.LC3B_TYPES.ALL;

ENTITY SHIFT16 IS
PORT( 
	A       : IN     STD_LOGIC_VECTOR (15 DOWNTO 0);
	SHFTAMT : IN     STD_LOGIC_VECTOR (3 DOWNTO 0);
	SHFTOP  : IN     STD_LOGIC_VECTOR (1 DOWNTO 0);
	F       : OUT    STD_LOGIC_VECTOR (15 DOWNTO 0)
);
-- DECLARATIONS
END SHIFT16 ;

-- HDS INTERFACE_END
ARCHITECTURE UNTITLED OF SHIFT16 IS
BEGIN
	SHIFT16 : PROCESS(A,SHFTAMT,SHFTOP)
	VARIABLE STATE : LC3B_WORD;
	VARIABLE SHAMT : INTEGER RANGE 0 TO 15;
	BEGIN
		SHAMT := TO_INTEGER(UNSIGNED(SHFTAMT));
	
		CASE SHFTOP IS
			WHEN SHFT_SLL =>
				STATE := STD_LOGIC_VECTOR("SLL"(UNSIGNED(A),SHAMT));
			WHEN SHFT_SRL =>
				STATE := STD_LOGIC_VECTOR("SRL"(UNSIGNED(A),SHAMT));
			WHEN SHFT_SRA =>
				IF (SHAMT = 0) THEN
					STATE := A;        --PERFORM NO SHIFTING
				ELSE
					STATE(15 - SHAMT DOWNTO 0) := A(15 DOWNTO SHAMT);
					STATE(15 DOWNTO (15 - SHAMT + 1)) := (OTHERS => A(15));
				END IF;
			WHEN OTHERS =>
				STATE := (OTHERS => 'X');
				ASSERT FALSE REPORT "INVALID SHIFT OPERATION." SEVERITY WARNING;
		END CASE;
		F <= STATE AFTER DELAY_SHIFTER;
	END PROCESS SHIFT16;	
END UNTITLED;